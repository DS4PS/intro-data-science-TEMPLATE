<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Reading---Data-Verbs-in-dplyr.knit</title>

<script src="Reading---Data-Verbs-in-dplyr_files/header-attrs-2.14/header-attrs.js"></script>
<script src="Reading---Data-Verbs-in-dplyr_files/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="Reading---Data-Verbs-in-dplyr_files/bootstrap-3.3.5/css/readable.min.css" rel="stylesheet" />
<script src="Reading---Data-Verbs-in-dplyr_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="Reading---Data-Verbs-in-dplyr_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="Reading---Data-Verbs-in-dplyr_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="Reading---Data-Verbs-in-dplyr_files/navigation-1.1/tabsets.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="textbook.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div id="header">




</div>

<div id="TOC">
<ul>
<li><a href="#data-verbs"><span class="toc-section-number">1</span> DATA
VERBS</a></li>
<li><a href="#the-dplyr-package"><span
class="toc-section-number">2</span> The <strong>dplyr</strong>
Package</a></li>
</ul>
</div>

<div id="data-verbs" class="section level1" number="1">
<h1><span class="header-section-number">1</span> DATA VERBS</h1>
<p>In this section we are shifting the focus from vector operations to
dataset operations.</p>
<p>Some of the most popular packages for building and manipulating
datasets come from what is affectionately referred to as the
“tidyverse”, a set of packages developed by Hadley Wickam and the R
Studio team. They are designed to make basic dataset operations more
intuitive and robust.</p>
<p>These packages were created with a common framework for data design
called “tidy data”. When datasets are built as or wrangled into the tidy
format they are much easier to analyze, and they will play nicely with a
large set of packages the follow the same philosophy of data design.</p>
<p>The core R packages contain all of the functions necessary to wrangle
datasets, but they are sometimes counter-intuitive or clumbsy in the
sense that they might start with a data frame and return a table or a
list, making them hard to use in data recipes. All of the “data verbs”
that we will cover in this section start with a data frame and return a
data frame, making them easier to use as data steps within a larger
project.</p>
<p>We will begin with some extremely useful verbs contained within the
<code>dplyr</code> package.</p>
<div class="figure">
<img src="figures/data_verbs.png" alt="A data verb requires a dataset as input, and returns a transformed dataset." width="60%" />
<p class="caption">
A data verb requires a dataset as input, and returns a transformed
dataset.
</p>
</div>
</div>
<div id="the-dplyr-package" class="section level1" number="2">
<h1><span class="header-section-number">2</span> The
<strong>dplyr</strong> Package</h1>
<style>
th {
    text-align: left;
}
td {
    text-align: left;
}
</style>
<div id="packages-used-in-this-chapter" class="section level2"
number="2.1">
<h2><span class="header-section-number">2.1</span> Packages Used in This
Chapter</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>( dplyr )</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>( pander )</span></code></pre></div>
</div>
<div id="key-concepts" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Key Concepts</h2>
<div class="figure">
<img src="figures/dataset_verbs.png" alt="Data verbs are functions that require a dataframe as the primary argument, perform some transformation on the data, then return a new dataframe." width="60%" />
<p class="caption">
Data verbs are functions that require a dataframe as the primary
argument, perform some transformation on the data, then return a new
dataframe.
</p>
</div>
<p>For a nice overview of all of the dataset verbs in <code>dplyr</code>
check out <a
href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf">The
<code>dplyr</code> Cheatsheet</a>.</p>
</div>
<div id="the-dplyr-package-1" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> The
<strong>dplyr</strong> Package</h2>
<p>This chapter will demonstrate a few basic dataset functions contained
within the <strong>dplyr</strong> package. There are a few things to
note as you get started:</p>
<ul>
<li><code>dplyr</code> functions are all data verbs that accept a
dataset as the argument, transform the data, and return a new
dataset.</li>
<li>The first argument is always the dataset name, and variables
(columns) can be referenced directly by name without quotation
marks.</li>
<li><code>dplyr</code> functions will return data as a “tibble”
(<em>tbl_df</em> class), which is a regular data frame wrapped in a nice
print method that includes metadata in the printout.</li>
</ul>
<p>For example, here is the regular data frame preview:</p>
<pre><code>##    weight group
## 1    4.17  ctrl
## 2    5.58  ctrl
## 3    5.18  ctrl
## 4    6.11  ctrl
## 5    4.50  ctrl
## 6    4.61  ctrl
## 7    5.17  ctrl
## 8    4.53  ctrl
## 9    5.33  ctrl
## 10   5.14  ctrl</code></pre>
<p>The tibble will print the first few rows and columns of a dataset,
and includes dataset dimensions and vector classes:</p>
<pre><code>## # A tibble: 30 × 2
##    weight group
##     &lt;dbl&gt; &lt;fct&gt;
##  1   4.17 ctrl 
##  2   5.58 ctrl 
##  3   5.18 ctrl 
##  4   6.11 ctrl 
##  5   4.5  ctrl 
##  6   4.61 ctrl 
##  7   5.17 ctrl 
##  8   4.53 ctrl 
##  9   5.33 ctrl 
## 10   5.14 ctrl 
## # … with 20 more rows</code></pre>
<p>We will cover the following <strong><em>dplyr</em></strong> functions
in this section of the textbook:</p>
<table>
<colgroup>
<col width="47%" />
<col width="52%" />
</colgroup>
<thead>
<tr class="header">
<th>DATA VERB</th>
<th>ACTION</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>filter()</td>
<td>Select rows</td>
</tr>
<tr class="even">
<td>select()</td>
<td>Select columns</td>
</tr>
<tr class="odd">
<td>arrange()</td>
<td>Sort the dataset by one or more columns</td>
</tr>
<tr class="even">
<td>mutate()</td>
<td>Create a new variable by transforming an existing variable or
variables</td>
</tr>
<tr class="odd">
<td>summarize()</td>
<td>Create summary statistics for specified variables</td>
</tr>
<tr class="even">
<td>group_by()</td>
<td>Split the dataset (implicitly) into a separate dataset for each
group</td>
</tr>
</tbody>
</table>
</div>
<div id="use-filter-to-subset-rows" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> Use
<strong>filter()</strong> to Subset Rows</h2>
<p><img src="figures/filter.png" width="60%" /></p>
<p>In the last chapter we learned how to use operators to translate from
plain English questions to data queries.</p>
<p>As an example, a city manager might want to know the average amount
owed on a delinquent property tax.</p>
<table style="width:32%;">
<colgroup>
<col width="12%" />
<col width="19%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">tax.id</th>
<th align="center">amount.owed</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">$0</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">$5,549</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">$0</td>
</tr>
<tr class="even">
<td align="center">4</td>
<td align="center">$1,709</td>
</tr>
<tr class="odd">
<td align="center">5</td>
<td align="center">$0</td>
</tr>
<tr class="even">
<td align="center">6</td>
<td align="center">$634</td>
</tr>
<tr class="odd">
<td align="center">7</td>
<td align="center">$0</td>
</tr>
<tr class="even">
<td align="center">8</td>
<td align="center">$0</td>
</tr>
<tr class="odd">
<td align="center">9</td>
<td align="center">$0</td>
</tr>
<tr class="even">
<td align="center">10</td>
<td align="center">$9,353</td>
</tr>
</tbody>
</table>
<p>We could write the query as follows:</p>
<ol style="list-style-type: decimal">
<li>Define the group.</li>
<li>Select the data that belongs to the group.</li>
<li>Analyze the group subset.</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>these.late <span class="ot">&lt;-</span> taxdat<span class="sc">$</span>amount.owed <span class="sc">&gt;</span> <span class="dv">0</span>                 <span class="co"># 1. Define group</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>overdue.amounts <span class="ot">&lt;-</span> taxdat<span class="sc">$</span>amount.owed[ these.late ]  <span class="co"># 2. Select data</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>overdue.amounts</span></code></pre></div>
<pre><code>## [1] 5549 1709  634 9353 1366</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>( overdue.amounts )                              <span class="co"># 3. Analyze data</span></span></code></pre></div>
<pre><code>## [1] 3722.2</code></pre>
<p>The <strong>filter()</strong> function in the
<strong><em>dplyr</em></strong> package is a slightly more elegant verb
for selecting the group and subsetting the data by rows.</p>
<blockquote>
<p>filter( dataset name , logical expression )</p>
</blockquote>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>( taxdat, amount.owed <span class="sc">&gt;</span> <span class="dv">0</span> )</span></code></pre></div>
<pre><code>##   tax.id amount.owed
## 1      2        5549
## 2      4        1709
## 3      6         634
## 4     10        9353
## 5     12        1366</code></pre>
<p>Note that we do not need to reference the dat$ references inside
<strong>dplyr</strong> functions.</p>
</div>
<div id="select-columns" class="section level2" number="2.5">
<h2><span class="header-section-number">2.5</span>
<strong>select()</strong> Columns</h2>
<p><img src="figures/select.png" width="60%" /></p>
<p>In the core R operators, we select colums from a dataset using the
subset function:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>( USArrests ) <span class="co"># historic data on crime rates in the US</span></span></code></pre></div>
<table style="width:75%;">
<colgroup>
<col width="23%" />
<col width="12%" />
<col width="13%" />
<col width="15%" />
<col width="9%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">Murder</th>
<th align="center">Assault</th>
<th align="center">UrbanPop</th>
<th align="center">Rape</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>Alabama</strong></td>
<td align="center">13.2</td>
<td align="center">236</td>
<td align="center">58</td>
<td align="center">21.2</td>
</tr>
<tr class="even">
<td align="center"><strong>Alaska</strong></td>
<td align="center">10</td>
<td align="center">263</td>
<td align="center">48</td>
<td align="center">44.5</td>
</tr>
<tr class="odd">
<td align="center"><strong>Arizona</strong></td>
<td align="center">8.1</td>
<td align="center">294</td>
<td align="center">80</td>
<td align="center">31</td>
</tr>
<tr class="even">
<td align="center"><strong>Arkansas</strong></td>
<td align="center">8.8</td>
<td align="center">190</td>
<td align="center">50</td>
<td align="center">19.5</td>
</tr>
<tr class="odd">
<td align="center"><strong>California</strong></td>
<td align="center">9</td>
<td align="center">276</td>
<td align="center">91</td>
<td align="center">40.6</td>
</tr>
<tr class="even">
<td align="center"><strong>Colorado</strong></td>
<td align="center">7.9</td>
<td align="center">204</td>
<td align="center">78</td>
<td align="center">38.7</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>USArrests[ , <span class="fu">c</span>(<span class="st">&quot;Murder&quot;</span>,<span class="st">&quot;Assault&quot;</span>) ]</span></code></pre></div>
<table style="width:50%;">
<colgroup>
<col width="23%" />
<col width="12%" />
<col width="13%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">Murder</th>
<th align="center">Assault</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>Alabama</strong></td>
<td align="center">13.2</td>
<td align="center">236</td>
</tr>
<tr class="even">
<td align="center"><strong>Alaska</strong></td>
<td align="center">10</td>
<td align="center">263</td>
</tr>
<tr class="odd">
<td align="center"><strong>Arizona</strong></td>
<td align="center">8.1</td>
<td align="center">294</td>
</tr>
<tr class="even">
<td align="center"><strong>Arkansas</strong></td>
<td align="center">8.8</td>
<td align="center">190</td>
</tr>
<tr class="odd">
<td align="center"><strong>California</strong></td>
<td align="center">9</td>
<td align="center">276</td>
</tr>
<tr class="even">
<td align="center"><strong>Colorado</strong></td>
<td align="center">7.9</td>
<td align="center">204</td>
</tr>
</tbody>
</table>
<p>The <strong><em>select()</em></strong> function converts this
operation into a data verb:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>( USArrests, Murder, Assault )</span></code></pre></div>
<table style="width:50%;">
<colgroup>
<col width="23%" />
<col width="12%" />
<col width="13%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">Murder</th>
<th align="center">Assault</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>Alabama</strong></td>
<td align="center">13.2</td>
<td align="center">236</td>
</tr>
<tr class="even">
<td align="center"><strong>Alaska</strong></td>
<td align="center">10</td>
<td align="center">263</td>
</tr>
<tr class="odd">
<td align="center"><strong>Arizona</strong></td>
<td align="center">8.1</td>
<td align="center">294</td>
</tr>
<tr class="even">
<td align="center"><strong>Arkansas</strong></td>
<td align="center">8.8</td>
<td align="center">190</td>
</tr>
<tr class="odd">
<td align="center"><strong>California</strong></td>
<td align="center">9</td>
<td align="center">276</td>
</tr>
<tr class="even">
<td align="center"><strong>Colorado</strong></td>
<td align="center">7.9</td>
<td align="center">204</td>
</tr>
</tbody>
</table>
<p>The <strong><em>select()</em></strong> function adds a lot of
additional arguments that make it easy to quickly identify and keep only
the necessary variables. We can demonstrate a few using the built-in
<em>iris</em> dataset in R.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>( iris ) <span class="sc">%&gt;%</span> <span class="fu">pander</span>()</span></code></pre></div>
<table style="width:94%;">
<colgroup>
<col width="20%" />
<col width="19%" />
<col width="20%" />
<col width="19%" />
<col width="13%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Sepal.Length</th>
<th align="center">Sepal.Width</th>
<th align="center">Petal.Length</th>
<th align="center">Petal.Width</th>
<th align="center">Species</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">5.1</td>
<td align="center">3.5</td>
<td align="center">1.4</td>
<td align="center">0.2</td>
<td align="center">setosa</td>
</tr>
<tr class="even">
<td align="center">4.9</td>
<td align="center">3</td>
<td align="center">1.4</td>
<td align="center">0.2</td>
<td align="center">setosa</td>
</tr>
<tr class="odd">
<td align="center">4.7</td>
<td align="center">3.2</td>
<td align="center">1.3</td>
<td align="center">0.2</td>
<td align="center">setosa</td>
</tr>
<tr class="even">
<td align="center">4.6</td>
<td align="center">3.1</td>
<td align="center">1.5</td>
<td align="center">0.2</td>
<td align="center">setosa</td>
</tr>
<tr class="odd">
<td align="center">5</td>
<td align="center">3.6</td>
<td align="center">1.4</td>
<td align="center">0.2</td>
<td align="center">setosa</td>
</tr>
<tr class="even">
<td align="center">5.4</td>
<td align="center">3.9</td>
<td align="center">1.7</td>
<td align="center">0.4</td>
<td align="center">setosa</td>
</tr>
</tbody>
</table>
<p>Exclude a column with the negative sign:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>( iris, <span class="sc">-</span>Species ) </span></code></pre></div>
<table style="width:82%;">
<colgroup>
<col width="20%" />
<col width="19%" />
<col width="20%" />
<col width="20%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Sepal.Length</th>
<th align="center">Sepal.Width</th>
<th align="center">Petal.Length</th>
<th align="center">Petal.Width</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">5.1</td>
<td align="center">3.5</td>
<td align="center">1.4</td>
<td align="center">0.2</td>
</tr>
<tr class="even">
<td align="center">4.9</td>
<td align="center">3</td>
<td align="center">1.4</td>
<td align="center">0.2</td>
</tr>
<tr class="odd">
<td align="center">4.7</td>
<td align="center">3.2</td>
<td align="center">1.3</td>
<td align="center">0.2</td>
</tr>
<tr class="even">
<td align="center">4.6</td>
<td align="center">3.1</td>
<td align="center">1.5</td>
<td align="center">0.2</td>
</tr>
<tr class="odd">
<td align="center">5</td>
<td align="center">3.6</td>
<td align="center">1.4</td>
<td align="center">0.2</td>
</tr>
<tr class="even">
<td align="center">5.4</td>
<td align="center">3.9</td>
<td align="center">1.7</td>
<td align="center">0.4</td>
</tr>
</tbody>
</table>
<p>Select by variable names:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>( iris, <span class="fu">ends_with</span>( <span class="st">&quot;Length&quot;</span> ) ) </span></code></pre></div>
<table style="width:42%;">
<colgroup>
<col width="20%" />
<col width="20%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Sepal.Length</th>
<th align="center">Petal.Length</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">5.1</td>
<td align="center">1.4</td>
</tr>
<tr class="even">
<td align="center">4.9</td>
<td align="center">1.4</td>
</tr>
<tr class="odd">
<td align="center">4.7</td>
<td align="center">1.3</td>
</tr>
<tr class="even">
<td align="center">4.6</td>
<td align="center">1.5</td>
</tr>
<tr class="odd">
<td align="center">5</td>
<td align="center">1.4</td>
</tr>
<tr class="even">
<td align="center">5.4</td>
<td align="center">1.7</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>( iris, <span class="fu">starts_with</span>( <span class="st">&quot;Petal&quot;</span> ) ) </span></code></pre></div>
<table style="width:42%;">
<colgroup>
<col width="20%" />
<col width="20%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Petal.Length</th>
<th align="center">Petal.Width</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1.4</td>
<td align="center">0.2</td>
</tr>
<tr class="even">
<td align="center">1.4</td>
<td align="center">0.2</td>
</tr>
<tr class="odd">
<td align="center">1.3</td>
<td align="center">0.2</td>
</tr>
<tr class="even">
<td align="center">1.5</td>
<td align="center">0.2</td>
</tr>
<tr class="odd">
<td align="center">1.4</td>
<td align="center">0.2</td>
</tr>
<tr class="even">
<td align="center">1.7</td>
<td align="center">0.4</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>( iris, <span class="fu">matches</span>(<span class="st">&quot;pal&quot;</span>) ) </span></code></pre></div>
<table style="width:42%;">
<colgroup>
<col width="20%" />
<col width="20%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Sepal.Length</th>
<th align="center">Sepal.Width</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">5.1</td>
<td align="center">3.5</td>
</tr>
<tr class="even">
<td align="center">4.9</td>
<td align="center">3</td>
</tr>
<tr class="odd">
<td align="center">4.7</td>
<td align="center">3.2</td>
</tr>
<tr class="even">
<td align="center">4.6</td>
<td align="center">3.1</td>
</tr>
<tr class="odd">
<td align="center">5</td>
<td align="center">3.6</td>
</tr>
<tr class="even">
<td align="center">5.4</td>
<td align="center">3.9</td>
</tr>
</tbody>
</table>
<p>Or we can select by a range of variables by placing a colon between
the first and last:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>( iris, Sepal.Length<span class="sc">:</span>Petal.Width ) </span></code></pre></div>
<table style="width:54%;">
<colgroup>
<col width="20%" />
<col width="19%" />
<col width="13%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Petal.Length</th>
<th align="center">Petal.Width</th>
<th align="center">Species</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1.4</td>
<td align="center">0.2</td>
<td align="center">setosa</td>
</tr>
<tr class="even">
<td align="center">1.4</td>
<td align="center">0.2</td>
<td align="center">setosa</td>
</tr>
<tr class="odd">
<td align="center">1.3</td>
<td align="center">0.2</td>
<td align="center">setosa</td>
</tr>
<tr class="even">
<td align="center">1.5</td>
<td align="center">0.2</td>
<td align="center">setosa</td>
</tr>
<tr class="odd">
<td align="center">1.4</td>
<td align="center">0.2</td>
<td align="center">setosa</td>
</tr>
<tr class="even">
<td align="center">1.7</td>
<td align="center">0.4</td>
<td align="center">setosa</td>
</tr>
</tbody>
</table>
</div>
<div id="arrange-sorts-data" class="section level2" number="2.6">
<h2><span class="header-section-number">2.6</span>
<strong>arrange()</strong> Sorts Data</h2>
<p><img src="figures/arrange.png" width="60%" /></p>
<p>The <strong><em>arrange()</em></strong> function sorts a dataset by
one or more columns. By default, it sorts from smallest to largest.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>( PlantGrowth, weight ) </span></code></pre></div>
<table style="width:25%;">
<colgroup>
<col width="12%" />
<col width="12%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">weight</th>
<th align="center">group</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">3.59</td>
<td align="center">trt1</td>
</tr>
<tr class="even">
<td align="center">3.83</td>
<td align="center">trt1</td>
</tr>
<tr class="odd">
<td align="center">4.17</td>
<td align="center">ctrl</td>
</tr>
<tr class="even">
<td align="center">4.17</td>
<td align="center">trt1</td>
</tr>
<tr class="odd">
<td align="center">4.32</td>
<td align="center">trt1</td>
</tr>
</tbody>
</table>
<p>If we prefer the dataset be sorted from largest to smallest, we can
apply the descending function <strong>desc()</strong> to the sort
variable.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>( PlantGrowth, <span class="fu">desc</span>(weight) ) </span></code></pre></div>
<table style="width:25%;">
<colgroup>
<col width="12%" />
<col width="12%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">weight</th>
<th align="center">group</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">6.31</td>
<td align="center">trt2</td>
</tr>
<tr class="even">
<td align="center">6.15</td>
<td align="center">trt2</td>
</tr>
<tr class="odd">
<td align="center">6.11</td>
<td align="center">ctrl</td>
</tr>
<tr class="even">
<td align="center">6.03</td>
<td align="center">trt1</td>
</tr>
<tr class="odd">
<td align="center">5.87</td>
<td align="center">trt1</td>
</tr>
</tbody>
</table>
<p>Or alternatively we can use the shortcut syntax of adding a negative
sign in front of the variable:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>( PlantGrowth, <span class="sc">-</span>weight ) </span></code></pre></div>
<p>We can also sort by multiple columns at once:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>( PlantGrowth, group, weight ) </span></code></pre></div>
<table style="width:24%;">
<colgroup>
<col width="11%" />
<col width="12%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">group</th>
<th align="center">weight</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">ctrl</td>
<td align="center">5.17</td>
</tr>
<tr class="even">
<td align="center">ctrl</td>
<td align="center">5.18</td>
</tr>
<tr class="odd">
<td align="center">ctrl</td>
<td align="center">5.33</td>
</tr>
<tr class="even">
<td align="center">ctrl</td>
<td align="center">5.58</td>
</tr>
<tr class="odd">
<td align="center">ctrl</td>
<td align="center">6.11</td>
</tr>
<tr class="even">
<td align="center">trt1</td>
<td align="center">4.69</td>
</tr>
<tr class="odd">
<td align="center">trt1</td>
<td align="center">4.81</td>
</tr>
<tr class="even">
<td align="center">trt1</td>
<td align="center">4.89</td>
</tr>
<tr class="odd">
<td align="center">trt1</td>
<td align="center">5.87</td>
</tr>
<tr class="even">
<td align="center">trt1</td>
<td align="center">6.03</td>
</tr>
</tbody>
</table>
<p>NOTE, the equivalent core R functions would use
<strong>subset[]</strong> and <strong>order()</strong> functions
together. You might see examples on Stack Overflow written like
this:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>PlantGrowth[ <span class="fu">order</span>(PlantGrowth<span class="sc">$</span>weight, <span class="at">decreasing=</span><span class="cn">TRUE</span>) , ]</span></code></pre></div>
<table style="width:38%;">
<colgroup>
<col width="12%" />
<col width="12%" />
<col width="12%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">weight</th>
<th align="center">group</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>21</strong></td>
<td align="center">6.31</td>
<td align="center">trt2</td>
</tr>
<tr class="even">
<td align="center"><strong>28</strong></td>
<td align="center">6.15</td>
<td align="center">trt2</td>
</tr>
<tr class="odd">
<td align="center"><strong>4</strong></td>
<td align="center">6.11</td>
<td align="center">ctrl</td>
</tr>
<tr class="even">
<td align="center"><strong>17</strong></td>
<td align="center">6.03</td>
<td align="center">trt1</td>
</tr>
<tr class="odd">
<td align="center"><strong>15</strong></td>
<td align="center">5.87</td>
<td align="center">trt1</td>
</tr>
<tr class="even">
<td align="center"><strong>29</strong></td>
<td align="center">5.8</td>
<td align="center">trt2</td>
</tr>
</tbody>
</table>
<p>As you can see, the <code>dplyr</code> versions are typically more
intuitive and concise!</p>
</div>
<div id="variable-transforms-with-mutate" class="section level2"
number="2.7">
<h2><span class="header-section-number">2.7</span> Variable Transforms
with <strong>mutate()</strong></h2>
<p>One of the most common operations in data analysis is to create a new
variable from one or more existing variables, a “variable
transformation”. Some examples include:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>x_squared <span class="ot">&lt;-</span>  x <span class="sc">*</span> x</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>celsius <span class="ot">&lt;-</span>  ( fahrenheit <span class="sc">-</span> <span class="dv">32</span> ) <span class="sc">*</span> ( <span class="dv">5</span><span class="sc">/</span><span class="dv">9</span> )</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>body.mass.index <span class="ot">&lt;-</span>  kg <span class="sc">/</span> meters<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>per.capita.income <span class="ot">&lt;-</span>  income <span class="sc">/</span> population</span></code></pre></div>
<p>The <strong><em>mutate()</em></strong> function creates a new
transformed variable from the formula you specify and adds it to the
original dataset.</p>
<p>As an example, perhaps we have data on the number of nonprofits
located in each US city. If we look at the raw count of nonprofits, it
makes it look as though the large cities have the most vibrant nonprofit
sectors:</p>
<table style="width:40%;">
<colgroup>
<col width="22%" />
<col width="18%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">city</th>
<th align="center">nonprofits</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">NEW YORK</td>
<td align="center">26503</td>
</tr>
<tr class="even">
<td align="center">LOS ANGELES</td>
<td align="center">17417</td>
</tr>
<tr class="odd">
<td align="center">WASHINGTON</td>
<td align="center">15701</td>
</tr>
<tr class="even">
<td align="center">SAN FRANCISCO</td>
<td align="center">12149</td>
</tr>
<tr class="odd">
<td align="center">BOSTON</td>
<td align="center">10536</td>
</tr>
<tr class="even">
<td align="center">CHICAGO</td>
<td align="center">10247</td>
</tr>
<tr class="odd">
<td align="center">PHILADELPHIA</td>
<td align="center">8538</td>
</tr>
<tr class="even">
<td align="center">DALLAS</td>
<td align="center">6008</td>
</tr>
<tr class="odd">
<td align="center">SEATTLE</td>
<td align="center">5830</td>
</tr>
<tr class="even">
<td align="center">ATLANTA</td>
<td align="center">5438</td>
</tr>
</tbody>
</table>
<p>But these numbers may be misleading. Once we account for the
population size through a new nonprofit density metric (nonprofits per
1,000 residents), we can see that some smaller cities have higher
densities per capita.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>dat.npos <span class="ot">&lt;-</span> <span class="fu">mutate</span>( dat.npos, <span class="at">density =</span> nonprofits <span class="sc">/</span> (pop<span class="sc">/</span><span class="dv">1000</span>) )</span></code></pre></div>
<table style="width:36%;">
<colgroup>
<col width="22%" />
<col width="13%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">city</th>
<th align="center">density</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">PORTLAND</td>
<td align="center">2.65</td>
</tr>
<tr class="even">
<td align="center">MADISON</td>
<td align="center">2.415</td>
</tr>
<tr class="odd">
<td align="center">ANCHORAGE</td>
<td align="center">2.156</td>
</tr>
<tr class="even">
<td align="center">SANTA BARBARA</td>
<td align="center">1.928</td>
</tr>
<tr class="odd">
<td align="center">LINCOLN</td>
<td align="center">1.886</td>
</tr>
<tr class="even">
<td align="center">WASHINGTON</td>
<td align="center">1.866</td>
</tr>
<tr class="odd">
<td align="center">ASHEVILLE</td>
<td align="center">1.805</td>
</tr>
<tr class="even">
<td align="center">TALLAHASSEE</td>
<td align="center">1.785</td>
</tr>
<tr class="odd">
<td align="center">BOSTON</td>
<td align="center">1.692</td>
</tr>
<tr class="even">
<td align="center">ALBANY</td>
<td align="center">1.685</td>
</tr>
</tbody>
</table>
</div>
<div id="rename-variables" class="section level2" number="2.8">
<h2><span class="header-section-number">2.8</span>
<strong>rename()</strong> Variables</h2>
<p>More often than not you will read in a dataset that has strange or
meaningless variable names:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;male&quot;</span>,<span class="st">&quot;male&quot;</span>,<span class="st">&quot;female&quot;</span>,<span class="st">&quot;female&quot;</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;treatment&quot;</span>,<span class="st">&quot;control&quot;</span>,<span class="st">&quot;treatment&quot;</span>,<span class="st">&quot;control&quot;</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>( x1, x2 )</span></code></pre></div>
<table style="width:29%;">
<colgroup>
<col width="12%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">x1</th>
<th align="center">x2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">male</td>
<td align="center">treatment</td>
</tr>
<tr class="even">
<td align="center">male</td>
<td align="center">control</td>
</tr>
<tr class="odd">
<td align="center">female</td>
<td align="center">treatment</td>
</tr>
<tr class="even">
<td align="center">female</td>
<td align="center">control</td>
</tr>
</tbody>
</table>
<p>The core R functions make it a little awkward to rename these
variables.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>( dat ) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;gender&quot;</span>,<span class="st">&quot;study.group&quot;</span>)</span></code></pre></div>
<table style="width:32%;">
<colgroup>
<col width="12%" />
<col width="19%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">gender</th>
<th align="center">study.group</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">male</td>
<td align="center">treatment</td>
</tr>
<tr class="even">
<td align="center">male</td>
<td align="center">control</td>
</tr>
<tr class="odd">
<td align="center">female</td>
<td align="center">treatment</td>
</tr>
<tr class="even">
<td align="center">female</td>
<td align="center">control</td>
</tr>
</tbody>
</table>
<p>The <strong>rename()</strong> function provides a more intuitive
syntax:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rename</span>( dat, <span class="at">gender=</span>x1, <span class="at">study.group=</span>x2 )</span></code></pre></div>
</div>
<div id="summarize-variables" class="section level2" number="2.9">
<h2><span class="header-section-number">2.9</span>
<strong>summarize()</strong> Variables</h2>
<p>The next chapter will cover descriptive statistics in more depth,
including some useful packages and functions for generating statistics
for a variety of variable types and reporting nice tables.</p>
<p>Most descriptive functions, however, are not data verbs in the sense
that they accept a data frame as the input and return a transformed data
frame or tibble. The <strong>dplyr</strong> function
<strong>summarize()</strong> is the primary function that will be used
in data recipes (see the next chapter).</p>
<p>Like other data verbs, the first argument will be the input dataset.
In this case, there is no pre-determined set of descriptive statistics.
The user needs to specify the desired metrics.</p>
<table style="width:44%;">
<colgroup>
<col width="16%" />
<col width="12%" />
<col width="15%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">group</th>
<th align="center">gender</th>
<th align="center">strength</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">control</td>
<td align="center">male</td>
<td align="center">97</td>
</tr>
<tr class="even">
<td align="center">control</td>
<td align="center">female</td>
<td align="center">102</td>
</tr>
<tr class="odd">
<td align="center">control</td>
<td align="center">male</td>
<td align="center">83</td>
</tr>
<tr class="even">
<td align="center">treatment</td>
<td align="center">male</td>
<td align="center">78</td>
</tr>
<tr class="odd">
<td align="center">control</td>
<td align="center">male</td>
<td align="center">63</td>
</tr>
<tr class="even">
<td align="center">treatment</td>
<td align="center">male</td>
<td align="center">93</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarize</span>( dat, <span class="at">n=</span><span class="fu">n</span>(), <span class="at">min=</span><span class="fu">min</span>(strength), <span class="at">mean=</span><span class="fu">mean</span>(strength), <span class="at">max=</span><span class="fu">max</span>(strength) )</span></code></pre></div>
<pre><code>##     n min  mean max
## 1 100  43 95.65 148</code></pre>
<p>Similarly, the native <strong>table()</strong> function is useful,
but returns a table object. The <strong>dplyr</strong>
<strong>count()</strong> function will function almost identically, but
it will return a data frame.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">count</span>( dat, group, gender )</span></code></pre></div>
<pre><code>##       group gender  n
## 1   control female 22
## 2   control   male 31
## 3 treatment female 24
## 4 treatment   male 23</code></pre>
<p>The real power of this function is the ability to use it with the
<strong>group_by()</strong> function to analyze outcomes for many data
subsets at once.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>grouped.dat <span class="ot">&lt;-</span> <span class="fu">group_by</span>( dat, group, gender )</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">summarize</span>( grouped.dat, </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">n=</span><span class="fu">n</span>(), </span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">min=</span><span class="fu">min</span>(strength), </span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">mean=</span><span class="fu">round</span>( <span class="fu">mean</span>(strength), <span class="dv">1</span> ), </span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>                  <span class="at">max=</span><span class="fu">max</span>(strength) ) </span></code></pre></div>
<pre><code>## # A tibble: 4 × 6
## # Groups:   group [2]
##   group     gender     n   min  mean   max
##   &lt;fct&gt;     &lt;fct&gt;  &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 control   female    22    74 107.    139
## 2 control   male      31    43  75.9   103
## 3 treatment female    24    87 120.    148
## 4 treatment male      23    65  86.4   136</code></pre>
<p>We will discuss this functionality in-depth two chapters from
now.</p>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
